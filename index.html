<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tribo ICE - Controle de Blusas</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Roboto', sans-serif; background: #f3f4f6; margin:0; padding:0;}
  header { background: #1E3A8A; color: white; padding: 20px; text-align:center;}
  h1 { margin:0; font-size: 24px; }
  main { max-width: 800px; margin: 20px auto; padding: 0 10px; }
  .gc-card { background:white; border-radius:12px; padding:10px; margin-bottom:20px; box-shadow:0 3px 6px rgba(0,0,0,0.1);}
  .gc-title { font-weight:bold; color:#1E3A8A; display:flex; justify-content:space-between; align-items:center; margin-bottom:5px;}
  .registro { display:flex; justify-content:space-between; align-items:center; padding:5px 0; border-bottom:1px solid #e2e8f0; }
  .registro:last-child { border:none; }
  button { padding: 4px 10px; border:none; border-radius:6px; cursor:pointer; }
  .pago { background:#1E3A8A; color:white; }
  .nao-pago { background:#3B82F6; color:white; }
  .excluir { background:#EF4444; color:white; margin-left:5px; }
  footer { text-align:center; background:#1E3A8A; color:white; padding:10px; margin-top:20px; }
  .adicionar, .busca { margin-bottom:10px; display:flex; gap:5px; flex-wrap: wrap;}
  input { padding:6px; border-radius:6px; border:1px solid #ccc; flex:1; min-width:120px;}
</style>
</head>
<body>
<header>
  <h1>Tribo ICE â€” Controle de Blusas</h1>
</header>
<main id="app">
  <div class="adicionar">
    <input type="text" id="nomeInput" placeholder="Nome da pessoa">
    <input type="text" id="gcInput" placeholder="Grupo (GC)">
    <button onclick="adicionarRegistro()">Adicionar</button>
  </div>
  <div class="busca">
    <input type="text" id="buscaInput" placeholder="Buscar por nome" oninput="render()">
  </div>
</main>
<footer>Feito com ðŸ’™ para a Tribo ICE</footer>

<script>
// ====== ConfiguraÃ§Ãµes iniciais ======
const STORAGE_KEY = "tribo-ice-registros-v3";

// Lista inicial de pessoas
let registros = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [
  { nome: "JÃºlia", gc: "Seguras", pago: true },
  { nome: "Layla M", gc: "Seguras", pago: true },
  { nome: "Loretta P", gc: "Rubi", pago: true },
  { nome: "Maria CecÃ­lia", gc: "Rubi", pago: true },
  { nome: "Anna", gc: "Rubi", pago: true },
  { nome: "Isaak", gc: "Destemidos", pago: true },
  { nome: "Matheus", gc: "Destemidos", pago: true },
  { nome: "Joaquim", gc: "AlcanÃ§ados", pago: true },
  { nome: "Guilherme", gc: "AlcanÃ§ados", pago: true },
  { nome: "Yuri", gc: "AlcanÃ§ados", pago: true },
  { nome: "Taila", gc: "Geral", pago: false },
  { nome: "Ana HeloÃ­sa (irmÃ£ do HÃ©lio)", gc: "Geral", pago: true },
  { nome: "Ana vitÃ³ria school", gc: "Geral", pago: true },
  { nome: "Emily school", gc: "Geral", pago: true }
];

// ====== FunÃ§Ãµes ======
function salvar() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(registros));
}

function render() {
  const app = document.getElementById('app');
  // remove todos os cards existentes
  app.querySelectorAll('.gc-card').forEach(c=>c.remove());

  const busca = document.getElementById('buscaInput').value.toLowerCase();
  // organiza grupos, "Geral" por Ãºltimo
  const grupos = {};
  registros.forEach(r=>{
    if(!grupos[r.gc]) grupos[r.gc]=[];
    grupos[r.gc].push(r);
  });
  const keys = Object.keys(grupos).filter(k=>k!=="Geral").sort();
  if(grupos["Geral"]) keys.push("Geral");

  keys.forEach(gc=>{
    const lista = grupos[gc].filter(r=>r.nome.toLowerCase().includes(busca));
    const pagos = lista.filter(r=>r.pago).length;
    const card = document.createElement('div'); card.className='gc-card';
    const title = document.createElement('div'); title.className='gc-title';
    title.innerHTML = `${gc} <span>${pagos}/${lista.length} pagos</span>`;
    card.appendChild(title);

    lista.forEach((r,index)=>{
      const div = document.createElement('div'); div.className='registro';
      const nomeDiv = document.createElement('div'); nomeDiv.textContent = r.nome;
      const btnPago = document.createElement('button');
      btnPago.textContent = r.pago ? 'Pago' : 'NÃ£o pago';
      btnPago.className = r.pago ? 'pago' : 'nao-pago';
      btnPago.onclick = ()=>{ r.pago=!r.pago; salvar(); render(); };

      const btnExcluir = document.createElement('button');
      btnExcluir.textContent = 'Excluir';
      btnExcluir.className = 'excluir';
      btnExcluir.onclick = ()=>{
        if(confirm(`Deseja remover ${r.nome}?`)) {
          registros.splice(registros.indexOf(r),1);
          salvar();
          render();
        }
      };

      div.appendChild(nomeDiv); div.appendChild(btnPago); div.appendChild(btnExcluir);
      card.appendChild(div);
    });
    app.appendChild(card);
  });
}

function adicionarRegistro() {
  const nomeInput = document.getElementById('nomeInput');
  const gcInput = document.getElementById('gcInput');
  const nome = nomeInput.value.trim();
  const gc = gcInput.value.trim();
  if(!nome || !gc) { alert("Preencha os dois campos!"); return; }
  registros.push({ nome, gc, pago:false });
  nomeInput.value=''; gcInput.value='';
  salvar();
  render();
}

// ====== Inicial ======
render();
</script>
</body>
</html>
